<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">

    <title>instagram</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/new_post.css">
    <link rel="shortcut icon" href="imgs/instagram.png">
</head>

<body>
    <section id="container">
        <header id="header">
            <section class="h_inner">
                <h1 class="logo">
                    <a href="index.html">
                        <div class="sprite_insta_icon"></div>
                        <div>
                            <div class="sprite_write_logo"></div>
                        </div>
                    </a>
                </h1>
                <div class="search_field">
                    <input type="text" placeholder="검색" tabindex="0">

                    <div class="fake_field">
                        <span class=sprite_small_search_icon></span>
                        <span>검색</span>
                    </div>
                </div>
                <div class="right_icons">
                    <a href="new_post.html">
                        <div class="sprite_camera_icon"></div>
                    </a>
                    <a href="login.html">
                        <div class="sprite_compass_icon"></div>
                    </a>
                    <a href="follow.html">
                        <div class="sprite_heart_icon_outline"></div>
                    </a>
                    <a href="profile.html">
                        <div class="sprite_user_icon_outline"></div>
                    </a>
                </div>
            </section>
        </header>

        <div id="main_container">
            <div class="post_form_container">
                <form action="#" class="post_form" id="fileForm" name="fileForm">
                    <div class="title">
                        NEW POST
                    </div>

                    <input type="file" name="userInputImg" id="userInputImg" required="required" style="display: none;">
                    <div class="preview" onclick="javascript:inputTagClick()">
                        <div class="upload">
                            <div class="post_btn">
                                <div class="plus_icon">
                                    <span></span>
                                    <span></span>
                                </div>
                                <p>포스트 이미지 추가</p>
                                <canvas id="imageCanvas"></canvas>
                            </div>
                        </div>
                    </div>
                    <p>
                        <textarea name="content" id="text_field" cols="100" rows="15"
                            placeholder="Input your text"></textarea>
                    </p>
                    <input class="submit_btn" type="submit" value="submit">
                </form>
            </div>
        </div>
    </section>

    <script>
        var fileInput = document.querySelector("#userInputImg"),
            button = document.querySelector(".input-file-trigger"),
            the_return = document.querySelector(".file-return");

        // Show image
        fileInput.addEventListener('change', handleImage, false);
        var canvas = document.getElementById('imageCanvas');
        var ctx = canvas.getContext('2d');

        function handleImage(e) {
            var reader = new FileReader();
            reader.onload = function (event) {
                var img = new Image();
                // var imgWidth =
                img.onload = function () {
                    canvas.width = 300;
                    canvas.height = 300;
                    ctx.drawImage(img, 0, 0, 300, 300);
                };
                img.src = event.target.result;
            };
            reader.readAsDataURL(e.target.files[0]);
        }

        function inputTagClick(){
            document.fileForm.userInputImg.click()
        }
    </script>

    <script>

    </script>
</body>

</html>